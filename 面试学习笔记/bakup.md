## java类加载过程?

7个过程: 加载, 验证, 准备, 解析, 初始化, 使用, 卸载

加载: 上事情: 通过类的全限定名获取该类的二进制流, 将该二进制流中的静态存储结构转化为方法去运行时数据结构, 在内存中生成该类的class对象, 作为该类的数据访问入口

全限定名->二进制流->静态存储结构->方法->生成class对象

验证: 保证class文件字节流信息正确安全:四种验证:  文件格式验证, 元数据验证, 字节码验证, 符号引用验证

文件格式验证: 字节流是否符合class文件规范, 

元数据验证: 字节码信息语义分析

字节码验证: 验证数据流和控制流,  确定程序语义是否正确, 主要验证方法体

符号引用验证:验证符号引用转为直接引用的合法性

准备: 为类的静态变量分配内存并赋默认值, 在方法区中分配, 不分配实例变量的内存

解析: 在常量池中找到类、接口、方法、字段的符号引用，并将其替换为直接引用的过程, 解析可以在初始化前后发生

初始化: 类加载最后一步, 开始真正执行类定义的java程序代码(clinit), 所有类变量的赋值以及静态代码语句块的执行代码, 顺序是按源码语句顺序执行, 静态代码块仅仅执行一次



装载: 根据路径找到class文件

链接: 检查class文件正确性, 准备, 给静态变量分配空间, 解析, 将符号引用转为直接引用

初始化: 对静态变量和静态代码块执行初始化



## java内存分配

寄存器: 无法控制

静态域: static的静态成员

常量池: 编译时就确定的,final常量值和符号引用(类和接口全限定名, 字段名方法名)

堆内存: new创建的对象和数组, 会有gc

栈内存: 基本类型的变量和对象引用变量, 可共享, 速度快



## 堆结构是什么样的, 堆中永久代是什么

堆是运行时数据区, 存类实例和数组, jvm启动时创建堆, 有垃圾回收器

分三个区: 新生代, 老年代, 永久代

永久代存放的是